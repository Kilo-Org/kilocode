# 开发编译

## 安装依赖

```bash
pnpm install
```

## 构建扩展

```bash
    pnpm lint
    npx turbo build
    pnpm -C webview-ui run build
    pnpm -C src bundle

    pnpm lint && npx turbo build && pnpm -C webview-ui run build && pnpm -C src bundle
```

## 调试安装

```bash
npm run build && NODE_ENV=development VSCODE_DEBUG_MODE=true code --extensionDevelopmentPath=${PWD}/src
```

## 打包扩展

```bash
pnpm vsix
```

## 安装扩展

```bash
pnpm install:vsix

```

---

# 其他参考

## 卸载安装

### 先卸载

```bash
trae --list-extensions | grep -i kilocode
trae --uninstall-extension kilocode.kilo-code
cd /Users/chenfengqing/1-share-disk/disk/e/WEDev/WeDev/demo/cfqlilei-git/kilocode
```

### 再安装

```bash
### 打包并安装
pnpm install:vsix

## 安装扩展
trae --install-extension bin/kilo-code-4.77.1.vsix --force
code --install-extension bin/kilo-code-4.77.1.vsix
trae . --extensionDevelopmentPath=.
code . --extensionDevelopmentPath=.

code --extensionDevelopmentPath=./src --disable-extensions ./launch

## 列出已安装的扩展
trae --list-extensions --show-versions | grep -i kilo
## 启动查看
trae src
```

# 卸载VS Code扩展

```bash
trae --list-extensions | grep -i kilo
trae --uninstall-extension kilocode.kilo-code

trae --uninstall-extension kilo-code


## rm -rf "$HOME/Library/Application Support/Trae/extensions/kilocode.kilo-code-*"
## rm -rf "$HOME/Library/Application Support/Trae/extensions/cfq.kilo-code-cfq-*"

ls -la ~/.vscode/extensions/ | grep -i kilo
```

## 实时调试

### 启动调试

```bash
cd src && pnpm watch:bundle
```

### 类型检查

TypeScript检查来确认是否还有类型错误。

```bash
pnpm lint
cd src && npx tsc --noEmit
npm run check-types

pnpm lint

npx lint-staged
```

### 运行调试

    ```bash
        pnpm lint
        pnpm -C webview-ui run build
        pnpm -C src bundle
    ```
    2. 调试通过之后，执行如下代码:
    ```bash
    npm run build && NODE_ENV=development VSCODE_DEBUG_MODE=true code --extensionDevelopmentPath=${PWD}/src
    ```

### 编译安装

```bash
pnpm clean
pnpm install --frozen-lockfile

pnpm -C webview-ui run build
pnpm -C src bundle

- 打包成VSIX文件
pnpm vsix

- 组合命令，包含构建和安装，但可能跳过某些步骤
pnpm install:vsix
node scripts/install-vsix.js

# 安装VSIX文件

code --install-extension ./bin/kilo-code-4.77.12.vsix --force
code --extensionDevelopmentPath=./src --disable-extensions
node -e "const pkg = require('./src/package.json'); console.log('buildNumber:', pkg.buildNumber); console.log('version:', pkg.version);"


pnpm clean && pnpm vsix
pnpm build

npm run build
code --uninstall-extension kilocode.kilo-code

code --install-extension ./bin/kilo-code-4.77.12.vsix --force
code --list-extensions --show-versions | grep kilo
code . --extensionDevelopmentPath=.
```

### 安装扩展

```bash
trae --install-extension /Users/chenfengqing/1-share-disk/disk/e/WEDev/WeDev/demo/cfqlilei-git/kilocode/bin/kilo-code-4.77.1.vsix --force
trae --install-extension bin/kilo-code-4.77.1.vsix --force
```

## 检查安装

```bash
trae --list-extensions --show-versions | grep kilo
```

## 重启VS Code

```bash
trae --reload-window
```

##
