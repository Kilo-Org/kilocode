# ุงูุญุฒู ุงููุดุชุฑูุฉ ูุงูุงุนุชูุงุฏูุงุช (Shared Packages)

> **ูุธุฑุฉ ุนุงูุฉ:** ุงูููุชุจุงุช ุงููุดุชุฑูุฉ ุจูู ููููุงุช Kilo Code
> **ุงููุณุงุฑ:** `packages/` > **ุงูุฅุฏุงุฑุฉ:** pnpm workspace

## ๐๏ธ ูุธุฑุฉ ุนุงูุฉ ุนูู ุงูุจููุฉ

ูุธุงู ุงูุญุฒู ุงููุดุชุฑูุฉ ูููุฑ ููุชุจุงุช ูุงุจูุฉ ูุฅุนุงุฏุฉ ุงูุงุณุชุฎุฏุงู ุจูู ุฌููุน ููููุงุช Kilo Code (ุงูุชุฏุงุฏ VS Codeุ ูุงุฌูุฉ ุงูููุจุ CLIุ ููุญู JetBrains).

### ูุณุงุญุฉ ุงูุนูู (Workspace)

```yaml
# pnpm-workspace.yaml
packages:
    - src
    - webview-ui
    - cli
    - apps/*
    - packages/*
    - jetbrains/host
    - jetbrains/plugin
```

## ๐ฆ ุงูุญุฒู ุงููุชุงุญุฉ

### 1. @roo-code/types

**ุงููุตู:** ุชุนุฑููุงุช TypeScript ุงููุดุชุฑูุฉ

```
packages/types/
โโโ src/
โ   โโโ api/              # ุชุนุฑููุงุช API
โ   โโโ ipc/              # ุชุนุฑููุงุช IPC
โ   โโโ telemetry/        # ุชุนุฑููุงุช ุงูุชุญูููุงุช
โ   โโโ index.ts          # ุงูุชุตุฏูุฑ ุงูุฑุฆูุณู
โโโ package.json
```

**ุงููุญุชูู:**

- ูุงุฌูุงุช ุจุฑูุฌุฉ ุงูุชุทุจููุงุช
- ุฃููุงุน ุงูุจูุงูุงุช ุงููุดุชุฑูุฉ
- ุชุนุฑููุงุช ุงูุฃุญุฏุงุซ
- ุฃููุงุน ุงูุฅุนุฏุงุฏุงุช

### 2. @roo-code/ipc

**ุงููุตู:** ุงูุงุชุตุงู ุจูู ุงูุนูููุงุช (Inter-Process Communication)

```
packages/ipc/
โโโ src/
โ   โโโ client.ts         # ุนููู IPC
โ   โโโ server.ts         # ุฎุงุฏู IPC
โ   โโโ channels.ts       # ุงููููุงุช ุงููุชุงุญุฉ
โ   โโโ index.ts
โโโ package.json
```

**ุงููููุฒุงุช:**

- ุงุชุตุงู ุขูู ุจูู ุงูุนูููุงุช
- ูููุงุช ูุชุนุฏุฏุฉ
- ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก
- ุงูุชุดููุฑ

### 3. @roo-code/telemetry

**ุงููุตู:** ุฎุฏูุฉ ุงูุชุญูููุงุช ูุงูุชุชุจุน

```
packages/telemetry/
โโโ src/
โ   โโโ client.ts         # ุนููู ุงูุชุญูููุงุช
โ   โโโ providers/        # ููุฏูู ุงูุฎุฏูุฉ
โ   โโโ events.ts         # ุชุนุฑููุงุช ุงูุฃุญุฏุงุซ
โ   โโโ index.ts
โโโ package.json
```

**ุงููููุฒุงุช:**

- ุชุชุจุน ุงูุงุณุชุฎุฏุงู
- ุชุญูููุงุช ุงูุฃุฏุงุก
- ุฅุนุฏุงุฏ ุงูุชูุงุฑูุฑ
- ุงูุฎุตูุตูุฉ

### 4. @roo-code/cloud

**ุงููุตู:** ุฎุฏูุงุช ุงูุณุญุงุจุฉ ูุงูุชูุงูู

```
packages/cloud/
โโโ src/
โ   โโโ client.ts         # ุนููู ุงูุณุญุงุจุฉ
โ   โโโ auth.ts           # ุงููุตุงุฏูุฉ
โ   โโโ api.ts            # ูุงุฌูุงุช ุจุฑูุฌุฉ ุงูุชุทุจููุงุช
โ   โโโ index.ts
โโโ package.json
```

**ุงููููุฒุงุช:**

- ูุตุงุฏูุฉ ุงููุณุชุฎุฏููู
- ูุฒุงููุฉ ุงูุจูุงูุงุช
- ุฎุฏูุงุช ุงูุณุญุงุจุฉ
- ุฅุฏุงุฑุฉ ุงูุญุณุงุจุงุช

### 5. @roo-code/build

**ุงููุตู:** ุฃุฏูุงุช ุงูุจูุงุก ุงููุดุชุฑูุฉ

```
packages/build/
โโโ src/
โ   โโโ esbuild.ts        # ุฅุนุฏุงุฏุงุช esbuild
โ   โโโ typescript.ts     # ุฅุนุฏุงุฏุงุช TypeScript
โ   โโโ vite.ts           # ุฅุนุฏุงุฏุงุช Vite
โ   โโโ index.ts
โโโ package.json
```

**ุงููููุฒุงุช:**

- ุฅุนุฏุงุฏุงุช ุงูุจูุงุก ุงูููุญุฏุฉ
- ุชุญุณูู ุงูุฃุฏุงุก
- ุฏุนู ุงูุจูุฆุงุช ุงููุฎุชููุฉ
- ุงูุฃุชูุชุฉ

### 6. @roo-code/config-eslint

**ุงููุตู:** ุฅุนุฏุงุฏุงุช ESLint ุงููุดุชุฑูุฉ

```
packages/config-eslint/
โโโ base.js               # ุงูุฅุนุฏุงุฏุงุช ุงูุฃุณุงุณูุฉ
โโโ next.js               # ุฅุนุฏุงุฏุงุช Next.js
โโโ package.json
```

**ุงููููุฒุงุช:**

- ููุงุนุฏ ููุญุฏุฉ
- ุชูุงูู ูุน VS Code
- ุฏุนู ุงููุดุงุฑูุน ุงููุฎุชููุฉ
- ุงูุชุฎุตูุต

### 7. @roo-code/config-typescript

**ุงููุตู:** ุฅุนุฏุงุฏุงุช TypeScript ุงููุดุชุฑูุฉ

```
packages/config-typescript/
โโโ base.json             # ุงูุฅุนุฏุงุฏุงุช ุงูุฃุณุงุณูุฉ
โโโ cjs.json              # ุฅุนุฏุงุฏุงุช CommonJS
โโโ nextjs.json           # ุฅุนุฏุงุฏุงุช Next.js
โโโ package.json
```

**ุงููููุฒุงุช:**

- ุฅุนุฏุงุฏุงุช ููุญุฏุฉ
- ุฏุนู ุฃููุงุน ุงููุดุงุฑูุน
- ุชุญุณููุงุช ุงูุฃุฏุงุก
- ุงูุชูุงูู

### 8. @roo-code/evals

**ุงููุตู:** ูุธุงู ุงูุชูููู ูุงูุงุฎุชุจุงุฑ

```
packages/evals/
โโโ src/
โ   โโโ evaluator.ts      # ุงููุญูู
โ   โโโ metrics.ts        # ุงูููุงููุณ
โ   โโโ reports.ts        # ุงูุชูุงุฑูุฑ
โ   โโโ index.ts
โโโ package.json
```

**ุงููููุฒุงุช:**

- ุชูููู ุงูุฃุฏุงุก
- ููุงููุณ ุงูุฌูุฏุฉ
- ุชูุงุฑูุฑ ููุตูุฉ
- ุงูุงุฎุชุจุงุฑ ุงูุชููุงุฆู

## ๐ ูุธุงู ุงูุงุนุชูุงุฏูุงุช

### 1. ุงูุงุนุชูุงุฏูุงุช ุงูุฃุณุงุณูุฉ

```json
{
	"dependencies": {
		"@roo-code/types": "workspace:^",
		"@roo-code/ipc": "workspace:^",
		"@roo-code/telemetry": "workspace:^",
		"@roo-code/cloud": "workspace:^"
	}
}
```

### 2. ุงูุงุนุชูุงุฏูุงุช ุงููุจููุฉ ูุณุจูุงู

```yaml
# pnpm-workspace.yaml
onlyBuiltDependencies:
    - "@tailwindcss/oxide"
    - "@vscode/vsce-sign"
    - "@vscode/sqlite3"
    - core-js
    - esbuild
    - keytar
    - puppeteer-chromium-resolver
```

### 3. ุฅุฏุงุฑุฉ ุงูุฅุตุฏุงุฑุงุช

- ุงุณุชุฎุฏุงู `workspace:^` ููุฑุจุท ุงููุฑู
- ุฅุฏุงุฑุฉ ุงูุฅุตุฏุงุฑุงุช ุงูููุญุฏุฉ
- ุงูุชุญุฏูุซ ุงูุชููุงุฆู
- ุงูุชูุงูููุฉ

## ๐ ุฃูุงูุฑ ูุณุงุญุฉ ุงูุนูู

### 1. ุงูุชุซุจูุช

```bash
# ุชุซุจูุช ุฌููุน ุงูุงุนุชูุงุฏูุงุช
pnpm install

# ุชุซุจูุช ุญุฒูุฉ ูุนููุฉ
pnpm --filter @roo-code/types install
```

### 2. ุงูุจูุงุก

```bash
# ุจูุงุก ุฌููุน ุงูุญุฒู
pnpm build

# ุจูุงุก ุญุฒูุฉ ูุนููุฉ
pnpm --filter @roo-code/types build
```

### 3. ุงูุงุฎุชุจุงุฑ

```bash
# ุงุฎุชุจุงุฑ ุฌููุน ุงูุญุฒู
pnpm test

# ุงุฎุชุจุงุฑ ุญุฒูุฉ ูุนููุฉ
pnpm --filter @roo-code/types test
```

### 4. ุงููุญุต

```bash
# ูุญุต ุฌููุน ุงูุญุฒู
pnpm lint

# ูุญุต ุญุฒูุฉ ูุนููุฉ
pnpm --filter @roo-code/types lint
```

## ๐จ ุฃูุถู ุงูููุงุฑุณุงุช

### 1. ูููู ุงูุญุฒูุฉ

```
packages/package-name/
โโโ src/
โ   โโโ index.ts          # ููุทุฉ ุงูุฏุฎูู ุงูุฑุฆูุณูุฉ
โ   โโโ types.ts          # ุงูุชุนุฑููุงุช
โ   โโโ utils.ts          # ุงูุฃุฏูุงุช ุงููุณุงุนุฏุฉ
โ   โโโ submodules/       # ุงููุญุฏุงุช ุงููุฑุนูุฉ
โโโ __tests__/            # ุงูุงุฎุชุจุงุฑุงุช
โโโ package.json          # ุฅุนุฏุงุฏุงุช ุงูุญุฒูุฉ
โโโ tsconfig.json         # ุฅุนุฏุงุฏุงุช TypeScript
โโโ README.md             # ุงููุซุงุฆู
```

### 2. ุงูุชุตุฏูุฑ

```typescript
// src/index.ts
export * from "./types"
export * from "./utils"
export * from "./api"

// ุงูุชุตุฏูุฑ ุงูุงูุชุฑุงุถู
export default {
	// ุงููุงุฌูุฉ ุงูุฑุฆูุณูุฉ
}
```

### 3. ุงูุฅุนุฏุงุฏุงุช

```json
// package.json
{
	"name": "@roo-code/package-name",
	"version": "1.0.0",
	"main": "dist/index.js",
	"types": "dist/index.d.ts",
	"scripts": {
		"build": "tsc",
		"test": "vitest",
		"lint": "eslint"
	}
}
```

## ๐ ุงูุชูุงูู ุจูู ุงูููููุงุช

### 1. ุงูุชุฏุงุฏ VS Code

```typescript
// src/extension.ts
import { ApiRequest } from "@roo-code/types"
import { IpcClient } from "@roo-code/ipc"
import { TelemetryService } from "@roo-code/telemetry"
```

### 2. ูุงุฌูุฉ ุงูููุจ

```typescript
// webview-ui/src/App.tsx
import { ExtensionMessage } from "@roo/ExtensionMessage"
import { TelemetryClient } from "@roo-code/telemetry"
```

### 3. CLI

```typescript
// cli/src/index.ts
import { CLIConfig } from "@roo-code/types"
import { TelemetryService } from "@roo-code/telemetry"
```

### 4. ููุญู JetBrains

```typescript
// jetbrains/host/src/extension-host.ts
import { HostMessage } from "@roo-code/types"
import { IpcServer } from "@roo-code/ipc"
```

## ๐ ุงูุฃุฏุงุก ูุงูุชุญุณูู

### 1. ุชุญููู ุงูุญุฒู

- ุงูุชุญููู ุนูุฏ ุงูุทูุจ
- ุงูุชุญููู ุบูุฑ ุงููุชุฒุงูู
- ุงูุชุฎุฒูู ุงููุคูุช

### 2. ุญุฌู ุงูุญุฒู

- ุชูุณูู ุงูููุฏ
- ุฅุฒุงูุฉ ุงูููุฏ ุบูุฑ ุงููุณุชุฎุฏู
- ุถุบุท ุงูุฃุตูู

### 3. ุงูุงุนุชูุงุฏูุงุช

- ุชุฌูุจ ุงูุงุนุชูุงุฏูุงุช ุงูุฏุงุฆุฑูุฉ
- ุงุณุชุฎุฏุงู ุงูุงุนุชูุงุฏูุงุช ุงููุดุชุฑูุฉ
- ุชุญุฏูุซ ููุชุธู

## ๐งช ุงูุงุฎุชุจุงุฑ ูุงูุฌูุฏุฉ

### 1. ุงุฎุชุจุงุฑุงุช ุงููุญุฏุงุช

```typescript
// __tests__/index.test.ts
import { describe, test, expect } from "vitest"
import { functionName } from "../src/index"

describe("functionName", () => {
	test("should work correctly", () => {
		expect(functionName()).toBeDefined()
	})
})
```

### 2. ุงุฎุชุจุงุฑุงุช ุงูุชูุงูู

- ุงุฎุชุจุงุฑ ุงูุชูุงูู ุจูู ุงูุญุฒู
- ุงุฎุชุจุงุฑ ุงูุชูุงูููุฉ
- ุงุฎุชุจุงุฑ ุงูุฃุฏุงุก

### 3. ุงูุฌูุฏุฉ

- ูุญุต ุงูููุฏ
- ุชุญููู ุงูุชุบุทูุฉ
- ูุฑุงุฌุนุฉ ุงูููุฏ

---

**ููุฎุต:** ูุธุงู ุงูุญุฒู ุงููุดุชุฑูุฉ ูููุฑ ุฃุณุงุณุงู ูููุงู ููุชุณูุงู ูุฌููุน ููููุงุช Kilo Code ูุน ุงูุชุฑููุฒ ุนูู ุฅุนุงุฏุฉ ุงูุงุณุชุฎุฏุงูุ ุงูุฃุฏุงุกุ ูุงูุฌูุฏุฉ.
