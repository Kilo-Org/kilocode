/* kilocode_change - new file */
/* Kilo Message Part overrides */

[data-component="text-part"] {
  [data-slot="text-part-body"] {
    margin-top: 0;
  }

  [data-slot="text-part-copy-wrapper"] {
    display: none;
  }
}

/*
 * User message expand/collapse button
 *
 * The upstream session-turn.css scopes these rules inside
 * [data-component="session-turn"], so they don't apply in the
 * kilo-vscode extension which renders messages outside of
 * session-turn. Replicate the visibility logic here so the
 * chevron button is hidden by default and only appears when
 * the message content overflows.
 */
[data-component="user-message"] [data-slot="user-message-text"] {
  max-height: var(--user-message-collapsed-height, 64px);
}

[data-component="user-message"][data-expanded="true"] [data-slot="user-message-text"] {
  max-height: none;
}

[data-component="user-message"][data-can-expand="true"] [data-slot="user-message-text"] {
  padding-right: 36px;
  padding-bottom: 28px;
}

[data-component="user-message"][data-can-expand="true"]:not([data-expanded="true"])
  [data-slot="user-message-text"]::after {
  content: "";
  position: absolute;
  left: 0;
  right: 0;
  height: 8px;
  bottom: 0;
  background:
    linear-gradient(to bottom, transparent, var(--surface-weak)),
    linear-gradient(to bottom, transparent, var(--surface-weak));
  pointer-events: none;
}

[data-component="user-message"] [data-slot="user-message-text"] [data-slot="user-message-expand"] {
  display: none;
  position: absolute;
  bottom: 6px;
  right: 6px;
  padding: 0;
}

[data-component="user-message"][data-can-expand="true"]
  [data-slot="user-message-text"]
  [data-slot="user-message-expand"],
[data-component="user-message"][data-expanded="true"]
  [data-slot="user-message-text"]
  [data-slot="user-message-expand"] {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  height: 22px;
  width: 22px;
  border: none;
  border-radius: 6px;
  background: transparent;
  cursor: pointer;
  color: var(--text-weak);

  [data-slot="icon-svg"] {
    transition: transform 0.15s ease;
  }
}

[data-component="user-message"][data-expanded="true"]
  [data-slot="user-message-text"]
  [data-slot="user-message-expand"]
  [data-slot="icon-svg"] {
  transform: rotate(180deg);
}

[data-component="user-message"] [data-slot="user-message-text"] [data-slot="user-message-expand"]:hover {
  background: var(--surface-raised-base);
  color: var(--text-base);
}
